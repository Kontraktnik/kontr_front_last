"use strict";(self.webpackChunkcontract_client=self.webpackChunkcontract_client||[]).push([[969],{9016:(w,h,l)=>{l.d(h,{q:()=>Z});var t=l(8186),d=l(8583),e=l(3858),g=l(1106);function _(r,u){if(1&r&&(t.TgZ(0,"div",15),t._UZ(1,"img",16),t.ALo(2,"authFile"),t.qZA()),2&r){const a=t.oxw(3);t.xp6(1),t.s9C("src",t.xi3(2,1,a.fileUrl,!0),t.LSH)}}function c(r,u){if(1&r&&(t._UZ(0,"ngx-doc-viewer",17),t.ALo(1,"authFile")),2&r){const a=t.oxw(3);let m;t.s9C("url",t.xi3(1,2,a.fileUrl,!0)),t.Q6J("viewer",a.wordExtension.includes(a.get_url_extension(null!==(m=a.fileUrl)&&void 0!==m?m:""))?"office":"google")}}function b(r,u){if(1&r&&(t.TgZ(0,"section"),t.YNc(1,_,3,4,"div",12),t.TgZ(2,"div",13),t.YNc(3,c,2,5,"ng-template",null,14,t.W1O),t.qZA(),t.qZA()),2&r){const a=t.MAs(4),m=t.oxw(2);let A;t.xp6(1),t.Q6J("ngIf",m.imageExtension.includes(m.get_url_extension(null!==(A=m.fileUrl)&&void 0!==A?A:"")))("ngIfElse",a)}}function x(r,u){1&r&&(t.TgZ(0,"section"),t._uU(1," ...loading "),t.qZA())}function v(r,u){if(1&r&&(t.TgZ(0,"div",10),t.YNc(1,b,5,2,"section",11),t.YNc(2,x,2,0,"section",11),t.qZA()),2&r){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",!a.loading),t.xp6(1),t.Q6J("ngIf",a.loading)}}let Z=(()=>{class r{constructor(){this.fileUrl="",this.imageExtension=[".jpg","jpg","jpeg",".jpeg","png",".png",".bmp","bmp","gif",".gif"],this.wordExtension=[".doc","doc","xml",".xml","docx",".docx",".ppt","ppt","pptx",".pptx"],this.loading=!1}ngOnInit(){}ngOnChanges(a){this.loading=!0,a.fileUrl.currentValue&&(this.fileUrl=a.fileUrl.currentValue),this.loading=!1}get_url_extension(a){return(a=a.substr(1+a.lastIndexOf("/")).split("?")[0]).split("#")[0].substr(a.lastIndexOf("."))}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-browser-file-modal"]],inputs:{fileUrl:"fileUrl"},features:[t.TTD],decls:15,vars:4,consts:[["id","browseFileModal","tabindex","-1","aria-labelledby","browseFileModalLabel","aria-modal","true","role","dialog",1,"modal","fade","fixed","top-0","left-0","hidden","w-full","h-full","outline-none","overflow-x-hidden","overflow-y-auto"],[1,"modal-dialog","modal-dialog-centered","modal-lg","relative","w-auto","pointer-events-none"],[1,"modal-content","border-none","shadow-lg","relative","flex","flex-col","w-full","pointer-events-auto","bg-white","bg-clip-padding","rounded-md","outline-none","text-current"],[1,"modal-header","flex","flex-shrink-0","items-center","justify-between","p-4","border-b","border-gray-200","rounded-t-md"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","box-content","w-4","h-4","p-1","text-black","border-none","rounded-none","opacity-50","focus:shadow-none","focus:outline-none","focus:opacity-100","hover:text-black","hover:opacity-75","hover:no-underline"],["class","modal-body relative p-4",4,"ngIf"],[1,"modal-footer"],[1,"modal-footer","flex","flex-shrink-0","flex-wrap","items-center","justify-end","p-4","border-t","border-gray-200","rounded-b-md"],["type","button","data-bs-dismiss","modal",1,"inline-block","px-6","py-2.5","bg-red-600","text-white","font-medium","text-xs","leading-tight","uppercase","rounded","shadow-md","hover:bg-red-700","hover:shadow-lg","focus:bg-red-700","focus:shadow-lg","focus:outline-none","focus:ring-0","active:bg-red-800","active:shadow-lg","transition","duration-150","ease-in-out"],["download","","target","_blank",1,"inline-block","px-6","py-2.5","bg-blue-600","text-white","font-medium","text-xs","leading-tight","uppercase","rounded","shadow-md","hover:bg-blue-700","hover:shadow-lg","focus:bg-blue-700","focus:shadow-lg","focus:outline-none","focus:ring-0","active:bg-blue-800","active:shadow-lg","transition","duration-150","ease-in-out","ml-1",3,"href"],[1,"modal-body","relative","p-4"],[4,"ngIf"],["class","w-full",4,"ngIf","ngIfElse"],[1,"bg-success-color"],["fileBrowser",""],[1,"w-full"],[1,"max-w-full",3,"src"],[1,"w-full",2,"width","100%","height","50vh",3,"url","viewer"]],template:function(a,m){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h4"),t._uU(5,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0444\u0430\u0439\u043b\u0430"),t.qZA(),t._UZ(6,"button",4),t.qZA(),t.YNc(7,v,3,2,"div",5),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"button",8),t._uU(11,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),t.qZA(),t.TgZ(12,"a",9),t.ALo(13,"authFile"),t._uU(14,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(7),t.Q6J("ngIf",m.fileUrl),t.xp6(5),t.s9C("href",t.lcZ(13,2,m.fileUrl),t.LSH))},directives:[d.O5,e.zr],pipes:[g.o],styles:[""]}),r})()},5552:(w,h,l)=>{l.d(h,{U:()=>O});var t=l(3679),d=l(9976),e=l(8186),g=l(1841),_=l(8002),c=l(5304),b=l(9719),x=l(7349),v=l(426);let Z=(()=>{class i{constructor(o,n){this.httpClient=o,this.appConfigService=n,this.baseApiUrl="",this.baseApiUrl=this.appConfigService.baseApiUrl}sendProfileFile(o,n,f){let p=new g.LE;return f&&(p=p.append("ProfileId",f.toString())),n.comment&&(p=p.append("Comment",n.comment.toString())),this.httpClient.post(this.baseApiUrl+"/ProfileFile/AddProfileFile",o,{observe:"response",params:p})}getAll(o){return this.httpClient.get(this.baseApiUrl+"/ProfileFile/GetAll?ProfileId="+o.toString()).pipe((0,_.U)(n=>n,(0,c.K)(n=>n)),(0,b.E)(),(0,x.d)())}deleteProfileFile(o){return this.httpClient.delete(this.baseApiUrl+"/ProfileFile/DeleteProfileFile?Id="+o.toString())}}return i.\u0275fac=function(o){return new(o||i)(e.LFG(g.eN),e.LFG(v._))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var r=l(2290),u=l(8583),a=l(9577),m=l(1106);function A(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"tr",25),e.TgZ(1,"td",26),e.TgZ(2,"div",27),e.TgZ(3,"div"),e.TgZ(4,"a",28),e.ALo(5,"authFile"),e._UZ(6,"fa-icon",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"td",26),e._uU(8),e.qZA(),e.TgZ(9,"td",26),e._uU(10),e.qZA(),e.TgZ(11,"td",26),e.TgZ(12,"div",27),e.TgZ(13,"div"),e.TgZ(14,"button",30),e.NdJ("click",function(){const p=e.CHM(o).$implicit;return e.oxw(2).deleteProfileFile(p.id)}),e._UZ(15,"fa-icon",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const o=s.$implicit,n=e.oxw(2);e.xp6(4),e.s9C("href",e.lcZ(5,5,o.file),e.LSH),e.xp6(2),e.Q6J("icon",n.faDownload),e.xp6(2),e.hij(" ",o.comment," "),e.xp6(2),e.hij(" ",null==o.user?null:o.user.fullName," "),e.xp6(5),e.Q6J("icon",n.faTimes)}}function T(i,s){if(1&i&&(e.TgZ(0,"div",18),e.TgZ(1,"table",19),e.TgZ(2,"thead",20),e.TgZ(3,"tr"),e.TgZ(4,"th",21),e._uU(5," \u0424\u0430\u0439\u043b "),e.qZA(),e.TgZ(6,"th",21),e._uU(7," \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 "),e.qZA(),e.TgZ(8,"th",21),e._uU(9," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u043b "),e.qZA(),e.TgZ(10,"th",21),e._uU(11," \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"tbody"),e.YNc(13,A,16,7,"tr",22),e.qZA(),e.qZA(),e.TgZ(14,"div",23),e.TgZ(15,"button",24),e._uU(16," \u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u0430\u0439\u043b \u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 "),e.qZA(),e.qZA(),e.qZA()),2&i){const o=e.oxw();e.xp6(13),e.Q6J("ngForOf",o.profileFiles)}}function F(i,s){1&i&&(e.TgZ(0,"div"),e._uU(1," \u041f\u043e\u043b\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0435\u0438\u044f "),e.qZA())}function y(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,F,2,0,"div",33),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.fbGroup.controls.comment.errors.required)}}function C(i,s){if(1&i&&(e.TgZ(0,"div",32),e.YNc(1,y,2,1,"div",33),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.fbGroup.controls.comment.errors)}}function U(i,s){if(1&i&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&i){const o=s.$implicit;e.xp6(1),e.hij(" ",o," ")}}function E(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,U,2,1,"div",35),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.validationErrors.messages.comment)}}function P(i,s){if(1&i&&(e.TgZ(0,"div",34),e.YNc(1,E,2,1,"div",33),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.validationErrors.messages.hasOwnProperty("comment"))}}function M(i,s){if(1&i&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&i){const o=s.$implicit;e.xp6(1),e.hij(" ",o," ")}}function I(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,M,2,1,"div",35),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.validationErrors.messages.file)}}function D(i,s){if(1&i&&(e.TgZ(0,"div",34),e.YNc(1,I,2,1,"div",33),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.validationErrors.messages.hasOwnProperty("file"))}}function q(i,s){1&i&&(e.TgZ(0,"div",37),e.TgZ(1,"div",38),e.TgZ(2,"button",39),e._uU(3,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"),e.qZA(),e.qZA(),e.qZA())}let O=(()=>{class i{constructor(o,n){this.service=o,this.toastr=n,this.profileFiles=[],this.formData=new FormData,this.validationErrors={status:!1,messages:{}},this.faDownload=d.q7m,this.faTimes=d.NBC}ngOnInit(){this.initializeData(),this.initializeForm()}initializeData(){var o;this.service.getAll(null!==(o=this.profileId)&&void 0!==o?o:0).subscribe(n=>{this.profileFiles=n.data})}initializeForm(){this.fbGroup=new t.cw({comment:new t.NI("",[t.kI.required])})}sendFile(){var o;this.fbGroup.valid&&this.service.sendProfileFile(this.formData,this.fbGroup.getRawValue(),null!==(o=this.profileId)&&void 0!==o?o:0).subscribe(n=>{var f,p;this.toastr.success(null!==(p=null===(f=n.body)||void 0===f?void 0:f.message)&&void 0!==p?p:"Uploaded"),this.clearForm(),this.initializeData()},n=>{n.errors&&(this.validationErrors.messages=n.errors,this.validationErrors.status=!0)})}onFileChange(o){if(o.target.files.length>0){const n=o.target.files[0];this.formData.append("file",n,n.name)}}clearForm(){this.fbGroup.reset(),this.formData=new FormData}deleteProfileFile(o){this.service.deleteProfileFile(o).subscribe(n=>{var f;this.toastr.success(null!==(f=null==n?void 0:n.message)&&void 0!==f?f:"Deleted"),this.initializeData()},n=>{console.log(n)})}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(Z),e.Y36(r._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profile-file-modal"]],inputs:{profileId:"profileId"},decls:25,vars:6,consts:[["class","w-full",4,"ngIf"],["id","showProfileFileModal","tabindex","-1","aria-labelledby","showProfileFileModalTitle","aria-modal","true","role","dialog",1,"modal","fade","fixed","top-0","left-0","hidden","w-full","h-full","outline-none","overflow-x-hidden","overflow-y-auto"],[1,"modal-dialog","modal-dialog-centered","relative","w-auto","pointer-events-none"],[1,"modal-content","border-none","shadow-lg","relative","flex","flex-col","w-full","pointer-events-auto","bg-white","bg-clip-padding","rounded-md","outline-none","text-current"],[1,"modal-header","flex","flex-shrink-0","items-center","justify-between","p-4","border-b","border-gray-200","rounded-t-md"],["id","showProfileFileModalLabel",1,"text-xl","font-medium","leading-normal","text-gray-800"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","box-content","w-4","h-4","p-1","text-black","border-none","rounded-none","opacity-50","focus:shadow-none","focus:outline-none","focus:opacity-100","hover:text-black","hover:opacity-75","hover:no-underline"],[1,"modal-body","relative","p-4"],[3,"formGroup","ngSubmit"],[1,"mb-3","w-full"],["for","comment",1,"form-label","inline-block","mb-2","text-gray-700"],["cols","10","type","text","formControlName","comment","id","comment","placeholder","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",1,"w-full","form-control","block","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none"],["class","text-red-500 text-left",4,"ngIf"],["class","text-red-500",4,"ngIf"],[1,"flex","justify-center"],["for","formFile",1,"form-label","inline-block","mb-2","text-gray-700"],["type","file","id","formFile",1,"form-control","block","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"change"],["class","grid grid-cols-12 gap-3 px-4 py-12",4,"ngIf"],[1,"w-full"],[1,"min-w-full"],[1,"bg-gray-4","border-solid","border-0","border-b","border-black"],["scope","col",1,"text-md","md:text-lg","font-medium","text-black","px-6","py-4","text-left"],["class","comforta bg-gray-5 border-b transition duration-300 ease-in-out hover:bg-gray-2",4,"ngFor","ngForOf"],[1,"text-right"],["type","button","data-bs-toggle","modal","data-bs-target","#showProfileFileModal",1,"my-5","inline-block","px-6","py-2.5","bg-blue-600","text-white","font-medium","text-xs","leading-tight","uppercase","rounded","shadow-md","hover:bg-blue-700","hover:shadow-lg","focus:bg-blue-700","focus:shadow-lg","focus:outline-none","focus:ring-0","active:bg-blue-800","active:shadow-lg","transition","duration-150","ease-in-out"],[1,"comforta","bg-gray-5","border-b","transition","duration-300","ease-in-out","hover:bg-gray-2"],[1,"text-md","md:text-lg","text-gray-900","font-light","px-6","py-4","whitespace-nowrap"],[1,"flex","space-x-2","justify-center"],["target","_blank","download","download","type","button",1,"cursor-pointer","inline-block","rounded-xl","px-6","pt-2.5","pb-2","bg-blue-700","text-white","font-medium","text-xs","leading-normal","uppercase","rounded","shadow-md","hover:bg-blue-700","hover:shadow-lg","focus:bg-blue-700","focus:shadow-lg","focus:outline-none","focus:ring-0","active:bg-blue-800","active:shadow-lg","transition","duration-150","ease-in-out","flex","align-center",3,"href"],[1,"bg-blue-700",3,"icon"],["type","button",1,"cursor-pointer","inline-block","rounded-xl","px-6","pt-2.5","pb-2","bg-red-600","text-white","font-medium","text-xs","leading-normal","uppercase","rounded","shadow-md","hover:bg-red-900","hover:shadow-lg","focus:bg-red-600","focus:shadow-lg","focus:outline-none","focus:ring-0","active:bg-red-800","active:shadow-lg","transition","duration-150","ease-in-out","flex","align-center",3,"click"],[1,"bg-red-600",3,"icon"],[1,"text-red-500","text-left"],[4,"ngIf"],[1,"text-red-500"],["class","text-left",4,"ngFor","ngForOf"],[1,"text-left"],[1,"grid","grid-cols-12","gap-3","px-4","py-12"],[1,"col-span-12","sm:col-span-12","md:col-span-12","md:flex","justify-center"],["type","submit",1,"w-80","text-white","main-blue-bg","mt-5","text-sm","px-8","py-3","rounded","hover:bg-blue-700","shadow-md"]],template:function(o,n){1&o&&(e.YNc(0,T,17,1,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5",5),e._uU(6," \u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u0430\u0439\u043b "),e.qZA(),e._UZ(7,"button",6),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("ngSubmit",function(){return n.sendFile()}),e.TgZ(10,"div"),e.TgZ(11,"div",9),e.TgZ(12,"label",10),e._uU(13,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),e.qZA(),e.TgZ(14,"textarea",11),e._uU(15,"              "),e.qZA(),e.qZA(),e.YNc(16,C,2,1,"div",12),e.YNc(17,P,2,1,"div",13),e.qZA(),e.TgZ(18,"div",14),e.TgZ(19,"div",9),e.TgZ(20,"label",15),e._uU(21,"\u0424\u0430\u0439\u043b"),e.qZA(),e.TgZ(22,"input",16),e.NdJ("change",function(p){return n.onFileChange(p)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(23,D,2,1,"div",13),e.YNc(24,q,4,0,"div",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("ngIf",null!=n.profileId&&n.fbGroup),e.xp6(9),e.Q6J("formGroup",n.fbGroup),e.xp6(7),e.Q6J("ngIf",n.fbGroup.controls.comment.invalid&&(n.fbGroup.controls.comment.dirty||n.fbGroup.controls.comment.touched)),e.xp6(1),e.Q6J("ngIf",n.validationErrors.status),e.xp6(6),e.Q6J("ngIf",n.validationErrors.status),e.xp6(1),e.Q6J("ngIf",n.fbGroup.valid))},directives:[u.O5,t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,u.sg,a.BN],pipes:[m.o],styles:[""]}),i})()},2620:(w,h,l)=>{l.d(h,{x:()=>t});class t{constructor(){this.comment="",this.signKey="",this.status=0,this.medicalStatusId=null}}},1106:(w,h,l)=>{l.d(h,{o:()=>e});var t=l(8186),d=l(426);let e=(()=>{class g{constructor(c){this.appConfigService=c,this.baseUrl="",this.baseUrl=this.appConfigService.baseUrl}transform(c,b=!1){let x=localStorage.getItem("token");return c&&c.length>0?this.baseUrl+"/"+c+"?token="+x:b?"assets/images/no-file.png":null}}return g.\u0275fac=function(c){return new(c||g)(t.Y36(d._,16))},g.\u0275pipe=t.Yjl({name:"authFile",type:g,pure:!0}),g})()},7764:(w,h,l)=>{l.d(h,{F:()=>x});var t=l(8002),d=l(5304),e=l(9719),g=l(7349),_=l(8186),c=l(1841),b=l(426);let x=(()=>{class v{constructor(r,u){this.http=r,this.appConfigService=u,this.baseApiUrl="",this.baseApiUrl=this.appConfigService.baseApiUrl}getById(r){return this.http.get(this.baseApiUrl+"/Survey/GetById?Id="+r.toString()).pipe((0,t.U)(u=>u,(0,d.K)(u=>u)),(0,e.E)(),(0,g.d)())}SendSavedRequest(r,u){return this.http.post(this.baseApiUrl+"/User/SendSavedRequest?UserSign="+u,r).pipe((0,t.U)(a=>a,(0,d.K)(a=>a)))}Update(r,u){return this.http.put(this.baseApiUrl+"/Survey/Update?SurveyId="+r,u).pipe((0,t.U)(a=>a,(0,d.K)(a=>a)))}deleteById(r){return this.http.delete(this.baseApiUrl+"/Survey/Delete?Id="+r.toString()).pipe((0,t.U)(u=>u,(0,d.K)(u=>u)))}getReport(r){return this.http.post(this.baseApiUrl+"/Survey/GetSurveyInfo?Id="+r,{}).pipe((0,t.U)(u=>u,(0,d.K)(u=>u)))}}return v.\u0275fac=function(r){return new(r||v)(_.LFG(c.eN),_.LFG(b._))},v.\u0275prov=_.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()}}]);